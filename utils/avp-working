#!/bin/sh
PACKTOP=$HOME/Local/packages/macosx-20140122-rc1
Nc=3
# noNc=3

#TARGET=`(cd ..; pwd)`/install
TARGET=$HOME/Local/packages/qlua-su-$Nc

# XXX Nc specific clover installation location

WOPTS='-Wno-unused-but-set-variable -Wno-unused-local-typedefs'

ARPACK_LIBS="-L$PACKTOP/arpack/lib -lparpack -larpack"
LAPACK_LIBS="-L$PACKTOP/lapack/lib -llapack"

CC='mpicc -m64 -std=c99' \
LD='mpif77 -m64 -fno-underscoring' \
CFLAGS="-Wall $WOPTS -DQDP_Nc=$Nc" \
COPTS='-g' \
LIBS='-lz' \
./configure                                                \
   --prefix=$TARGET                                        \
   --with-qdp=$PACKTOP/qdp                                 \
   --with-lua=$PACKTOP/lua                                 \
   --with-gsl=$PACKTOP/gsl                                 \
   --with-hdf5=$HOME/Local/packages/hdf5-1.8.11-parallel   \
   --with-nc=2                                             \
   --with-nc=3                                             \
   --with-nc=N                                             \
   --with-arpack="$ARPACK_LIBS $LAPACK_LIBS"               \
   --with-mdwf=$PACKTOP/mdwf                               \
   --with-clover=$PACKTOP/clover                           \
   --clover-nc=$Nc                                         \
   $*

#   --without-nc=$noNc                                      \
#   --without-nc=N                                          \
