require "stdlib"

fname = "xxx.h5"
Nc = 5

L = qcd.lattice{2,3,4}
v = L:ColorMatrixN(Nc)
w = qcd.ColorMatrixN(Nc)
for a = 0, w:colors() - 1 do
   for b = 0, w:colors() - 1 do
      w[{a=a,b=b}] = complex(1+0.1*a,2+0.1*b)
   end
end
v[{0,1,2}] = w

x = qcd.hdf5.Writer(fname)
x:write("/sample/serial/colmat-D", w)
x:write("/sample/serial/colmat-F", w, {precision = "float"})
x:write("/sample/lattice/colmat-D", v)
x:write("/sample/lattice/colmat-F", -v, {precision = "float"})
x:close()
printf("DONE\n")